<div class="passenger-form-container" [formGroup]="passengerForm">
  <h3>Passenger {{ passengerIndex + 1 }}</h3>

  <div class="form-grid">
    <!-- Basic Information -->
    <div class="form-section">
      <h4>Basic Information</h4>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>First Name</mat-label>
          <input matInput formControlName="firstName" required>
          <mat-icon matPrefix>person</mat-icon>
          <mat-error *ngIf="passengerForm.get('firstName')?.hasError('required')">
            {{ getErrorMessage('firstName') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" required>
          <mat-error *ngIf="passengerForm.get('lastName')?.hasError('required')">
            {{ getErrorMessage('lastName') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" required>
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngIf="passengerForm.get('email')?.hasError('email')">
            {{ getErrorMessage('email') }}
          </mat-error>
          <mat-error *ngIf="passengerForm.get('email')?.hasError('required')">
            {{ getErrorMessage('email') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Phone</mat-label>
          <input matInput type="tel" formControlName="phone" required>
          <mat-icon matPrefix>phone</mat-icon>
          <mat-error *ngIf="passengerForm.get('phone')?.hasError('required')">
            {{ getErrorMessage('phone') }}
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <!-- Passenger Details -->
    <div class="form-section">
      <h4>Passenger Details</h4>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Date of Birth</mat-label>
          <input matInput [matDatepicker]="dobPicker" formControlName="dateOfBirth" required>
          <mat-datepicker-toggle matSuffix [for]="dobPicker"></mat-datepicker-toggle>
          <mat-datepicker #dobPicker></mat-datepicker>
          <mat-error *ngIf="passengerForm.get('dateOfBirth')?.hasError('required')">
            {{ getErrorMessage('dateOfBirth') }}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Passenger Type</mat-label>
          <mat-select formControlName="type" required>
            <mat-option *ngFor="let type of passengerTypes" [value]="type.value">
              <div class="passenger-type-option">
                <mat-icon>{{ type.icon }}</mat-icon>
                <div>
                  <span class="type-label">{{ type.label }}</span>
                  <span class="type-description">{{ type.description }}</span>
                </div>
              </div>
            </mat-option>
          </mat-select>
          <mat-error *ngIf="passengerForm.get('type')?.hasError('required')">
            {{ getErrorMessage('type') }}
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Passport Number</mat-label>
          <input matInput formControlName="passportNumber">
          <mat-icon matPrefix>badge</mat-icon>
          <mat-hint>Optional - Required for international travel</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Nationality</mat-label>
          <mat-select formControlName="nationality">
            <mat-option *ngFor="let nationality of nationalities" [value]="nationality">
              {{ nationality }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>flag</mat-icon>
        </mat-form-field>
      </div>
    </div>

    <!-- Special Requirements -->
    <div class="form-section full-width">
      <h4>Special Requirements</h4>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Special Requirements</mat-label>
        <textarea matInput formControlName="specialRequirements" rows="3"></textarea>
        <mat-hint>Dietary restrictions, medical needs, accessibility requirements, etc.</mat-hint>
      </mat-form-field>
    </div>
  </div>
</div>
